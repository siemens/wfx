<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=../../../favicons/favicon.ico><link rel=apple-touch-icon href=../../../favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=../../../favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=../../../favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=../../../favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=../../../favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=../../../favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=../../../favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=../../../favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=../../../favicons/android-192x192.png sizes=192x192><title>Device Artifact Update (DAU) | </title><meta name=description content="The Device Artifact Update Workflow Family has been specifically designed for updating software on devices.
The following clients have support for the Device Artifact Update Workflow Family:
SWUpdate - Software Update for Embedded Linux Devices. Workflows Currently, the DAU Workflow Family comprises two workflows that model the software update process for devices:
The wfx.workflow.dau.direct workflow caters for the fully automated software update use case while the wfx.workflow.dau.phased workflow operates in distinct phases requiring external input to advance the workflow."><meta property="og:url" content="/docs/workflows/dau/"><meta property="og:title" content="Device Artifact Update (DAU)"><meta property="og:description" content="The Device Artifact Update Workflow Family has been specifically designed for updating software on devices.
The following clients have support for the Device Artifact Update Workflow Family:
SWUpdate - Software Update for Embedded Linux Devices. Workflows Currently, the DAU Workflow Family comprises two workflows that model the software update process for devices:
The wfx.workflow.dau.direct workflow caters for the fully automated software update use case while the wfx.workflow.dau.phased workflow operates in distinct phases requiring external input to advance the workflow."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta itemprop=name content="Device Artifact Update (DAU)"><meta itemprop=description content="The Device Artifact Update Workflow Family has been specifically designed for updating software on devices.
The following clients have support for the Device Artifact Update Workflow Family:
SWUpdate - Software Update for Embedded Linux Devices. Workflows Currently, the DAU Workflow Family comprises two workflows that model the software update process for devices:
The wfx.workflow.dau.direct workflow caters for the fully automated software update use case while the wfx.workflow.dau.phased workflow operates in distinct phases requiring external input to advance the workflow."><meta itemprop=wordCount content="840"><meta name=twitter:card content="summary"><meta name=twitter:title content="Device Artifact Update (DAU)"><meta name=twitter:description content="The Device Artifact Update Workflow Family has been specifically designed for updating software on devices.
The following clients have support for the Device Artifact Update Workflow Family:
SWUpdate - Software Update for Embedded Linux Devices. Workflows Currently, the DAU Workflow Family comprises two workflows that model the software update process for devices:
The wfx.workflow.dau.direct workflow caters for the fully automated software update use case while the wfx.workflow.dau.phased workflow operates in distinct phases requiring external input to advance the workflow."><link rel=preload href=../../../scss/main.min.54c2acc6778c5762656aa8b14c62be71632866ffb9626f60512fcc97f998539e.css as=style integrity="sha256-VMKsxneMV2JlaqixTGK+cWMoZv+5Ym9gUS/Ml/mYU54=" crossorigin=anonymous><link href=../../../scss/main.min.54c2acc6778c5762656aa8b14c62be71632866ffb9626f60512fcc97f998539e.css rel=stylesheet integrity="sha256-VMKsxneMV2JlaqixTGK+cWMoZv+5Ym9gUS/Ml/mYU54=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-page><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=../../../><span class="navbar-brand__logo navbar-logo"><svg id="Ebene_1" width="477.65" height="263.3" viewBox="0 0 955.3 526.6"><style id="style56">.st0{fill:#00c1b6}.st1{fill:#1b9a99}</style><g id="Ebene_1_00000104692970429684080800000006472111204584987530_" transform="translate(-490.1 -233.3)"><path id="path58" d="m1163.3 569.5-97.2-52.2c-7.5-4-16.7 1.4-16.7 10v104.3c0 8.6 9.1 14 16.7 10l97.2-52.2c8-4.2 8-15.6.0-19.9zM777.8 673.3v86.6H625.6c-74.8.0-135.5-60.7-135.5-135.5v-146c10.5 12 26 19.6 43.2 19.6 17.3.0 32.9-7.7 43.4-19.9v146.3c0 27 21.9 48.9 48.9 48.9z" class="st0"/><path id="path60" d="M776.8 759.9c-74.8.0-135.5-60.7-135.5-135.5V441.1c0-23.9 19.4-43.3 43.3-43.3s43.3 19.4 43.3 43.3v183.4c0 27 21.9 48.9 48.9 48.9h15.7v-189c0-47.8 38.8-86.6 86.6-86.6v259.8c0 56.5-45.8 102.3-102.3 102.3z" class="st1"/><path id="path62" d="M1146.3 759.4h-19.1c-23.9.0-43.3-19.4-43.3-43.3s19.4-43.3 43.3-43.3h14.4c27 0 48.9-21.9 48.9-48.9v-87.3c0-28.8-23.4-52.2-52.2-52.2h-261v-86.6h261c76.7.0 138.8 62.1 138.8 138.8v92c0 72.3-58.6 130.8-130.8 130.8z" class="st1"/><path id="path64" d="M1445.4 441.1c0 12-4.8 22.8-12.7 30.6-7.8 7.8-18.7 12.7-30.6 12.7h-72.8c-27 0-48.9 21.9-48.9 48.9v92c0 26.3 21.3 47.5 47.5 47.5h37c-12.3 10.5-20 26.1-20 43.5.0 17.1 7.6 32.5 19.5 43.1h-31.8c-76.7.0-138.8-62.1-138.8-138.8v-87.3c0-74.8 60.7-135.5 135.5-135.5h72.8c23.9.0 43.3 19.4 43.3 43.3zm-347.1-121.2h-23c-27 0-48.9 21.9-48.9 48.9V716c0 23.9-19.4 43.3-43.3 43.3s-43.3-19.4-43.3-43.3V368.8c0-74.8 60.7-135.5 135.5-135.5h23.2c-12.2 10.5-19.9 26.1-19.9 43.4.0 17.2 7.6 32.7 19.7 43.2z" class="st1"/><circle id="circle66" cx="1136" cy="276.7" r="43.1" class="st1"/><circle id="circle68" cx="1402.3" cy="716.3" r="43.1" class="st1"/><circle id="circle70" cx="533.3" cy="440.7" r="43.1" class="st0" transform="rotate(-80.781 533.308 440.692)"/></g></svg></span><span class=navbar-brand__name></span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class="nav-link active" href=../../../docs/><span>Documentation</span></a></li></ul></div><div class="d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=../../../offline-search-index.dac18fb611c3e64ce4737d8a50e5f321.json data-offline-search-base-href=../../../ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=../../../offline-search-index.dac18fb611c3e64ce4737d8a50e5f321.json data-offline-search-base-href=../../../ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=../../../docs/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsinstallation-li><a href=../../../docs/installation/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsinstallation><span>Build and Installation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconfiguration-li><a href=../../../docs/configuration/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconfiguration><span>Configuration</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperations-li><a href=../../../docs/operations/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperations><span>Operations</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsapi-li><a href=../../../docs/api/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi><span>REST API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuse-cases-li><a href=../../../docs/use-cases/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuse-cases><span>Use Cases</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsworkflows-li><a href=../../../docs/workflows/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsworkflows><span>Workflows</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docsworkflowsdau-li><a href=../../../docs/workflows/dau/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-docsworkflowsdau><span class=td-sidebar-nav-active-item>Device Artifact Update (DAU)</span></a></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#workflows>Workflows</a><ul><li><a href=#installation>Installation</a></li><li><a href=#modus-operandi>Modus Operandi</a></li><li><a href=#wfxworkflowdaudirect>wfx.workflow.dau.direct</a></li><li><a href=#wfxworkflowdauphased>wfx.workflow.dau.phased</a></li></ul></li><li><a href=#job-definition>Job Definition</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=../../../docs/>Documentation</a></li><li class=breadcrumb-item><a href=../../../docs/workflows/>Workflows</a></li><li class="breadcrumb-item active" aria-current=page>Device Artifact Update (DAU)</li></ol></nav><div class=td-content><h1>Device Artifact Update (DAU)</h1><header class=article-meta></header><p>The Device Artifact Update Workflow Family has been specifically designed for updating software on devices.</p><p>The following clients have support for the Device Artifact Update Workflow Family:</p><ul><li><a href=https://github.com/sbabic/swupdate/blob/master/doc/source/suricatta.rst#support-for-wfx target=_blank>SWUpdate</a> - Software Update
for Embedded Linux Devices.</li></ul><h2 id=workflows>Workflows</h2><p>Currently, the DAU Workflow Family comprises two workflows that model the software update process for devices:</p><p>The
<a href=../../../wfx.workflow.dau.direct.yml><code>wfx.workflow.dau.direct</code></a> workflow caters for the fully automated software update
use case while the
<a href=../../../wfx.workflow.dau.phased.yml><code>wfx.workflow.dau.phased</code></a> workflow operates in distinct phases
requiring external input to advance the workflow.</p><h3 id=installation>Installation</h3><p>wfx does not come with any pre-loaded or pre-seeded workflows, thus requiring the creation of workflows either locally</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wfxctl workflow create workflow/dau/*.yml
</span></span></code></pre></div><p>or remotely, e.g. using
<a href=https://curl.se/ target=_blank>curl</a>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -Ls https://github.com/siemens/wfx/raw/main/workflow/dau/wfx.workflow.dau.phased.yml <span style=color:#1f2328>|</span> wfxctl workflow create -
</span></span><span style=display:flex><span>curl -Ls https://github.com/siemens/wfx/raw/main/workflow/dau/wfx.workflow.dau.direct.yml <span style=color:#1f2328>|</span> wfxctl workflow create -
</span></span></code></pre></div><h3 id=modus-operandi>Modus Operandi</h3><p>Both workflows operate in <strong>stages</strong>, each of which follows the Command, Feedback, and Completion (CFC) scheme. These
stages consist of:</p><ol><li>a <em>command</em> state which instructs the device to start the update process,</li><li>an <em>action + feedback</em> state during which the device performs the necessary work and provides progress updates to
wfx, and</li><li>a <em>completion</em> state in which the device signals the completion of the stage.</li></ol><p>A sequence of such CFC loops constitutes the particular workflow. In case of <code>wfx.workflow.dau.direct</code>, the wfx
transitions to the next stage automatically while in case of <code>wfx.workflow.dau.phased</code>, wfx waits for external input,
e.g., from an operator.</p><h3 id=wfxworkflowdaudirect>wfx.workflow.dau.direct</h3><p>The
<a href=../../../wfx.workflow.dau.direct.yml><code>wfx.workflow.dau.direct</code></a> workflow consists of the two stages <em>installation</em> and
<em>activation</em>: During the installation stage, the device downloads and installs the update artifacts. In the subsequent
activation stage, the device takes action to activate the update. Depending on the type of artifact(s), this activation
action varies as, e.g., container images need a different activation action than firmware disk images (see below Section
<a href=#job-definition>Job Definition</a>).</p><p>The graph representation of the <code>wfx.workflow.dau.direct</code> workflow is depicted in the following figure, omitting state
descriptions and transition eligibles for legibility:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span> INSTALL ────────┐
</span></span><span style=display:flex><span>    │            │
</span></span><span style=display:flex><span>    ├─◀─┐        │
</span></span><span style=display:flex><span>    ▼   │        │
</span></span><span style=display:flex><span>INSTALLING ──────┤
</span></span><span style=display:flex><span>    │            │
</span></span><span style=display:flex><span>    ▼            │
</span></span><span style=display:flex><span>INSTALLED        │
</span></span><span style=display:flex><span>    │            │
</span></span><span style=display:flex><span>    ▼            │
</span></span><span style=display:flex><span> ACTIVATE ───────┤
</span></span><span style=display:flex><span>    │            │
</span></span><span style=display:flex><span>    ├─◀─┐        │
</span></span><span style=display:flex><span>    ▼   │        │
</span></span><span style=display:flex><span>ACTIVATING ──────┤
</span></span><span style=display:flex><span>    │            │
</span></span><span style=display:flex><span>    ▼            ▼
</span></span><span style=display:flex><span>ACTIVATED    TERMINATED
</span></span></code></pre></div><h3 id=wfxworkflowdauphased>wfx.workflow.dau.phased</h3><p>The
<a href=../../../wfx.workflow.dau.phased.yml><code>wfx.workflow.dau.phased</code></a> workflow is similar to the <code>wfx.workflow.dau.direct</code>
workflow but starts in the <code>CREATED</code> state instead and introduces another <em>download</em> stage in between installation and
activation to decouple artifact download from its installation: The initial state <code>CREATED</code> serves as an anchor to
actually kickstart the external input-driven CFC scheme. With the additional download stage, a maintenance window could
be realized prior to which the artifact is downloaded but only installed when wfx commands the begin of the installation
phase (e.g. a certain time window has been reached).</p><p>Consequently ― and in contrast to the <code>wfx.workflow.dau.direct</code> ― wfx doesn&rsquo;t transition to the next stage automatically
but waits for external input to do so, e.g., by an operator.</p><p>The graph representation of the <code>wfx.workflow.dau.phased</code> workflow is depicted in the following figure, again omitting
state descriptions and transition eligibles for legibility:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>  CREATED
</span></span><span style=display:flex><span>     │
</span></span><span style=display:flex><span>     ▼
</span></span><span style=display:flex><span>  DOWNLOAD ───────┐
</span></span><span style=display:flex><span>     │            │
</span></span><span style=display:flex><span>     ├─◀─┐        │
</span></span><span style=display:flex><span>     ▼   │        │
</span></span><span style=display:flex><span>DOWNLOADING ──────┤
</span></span><span style=display:flex><span>     │            │
</span></span><span style=display:flex><span>     ▼            │
</span></span><span style=display:flex><span> DOWNLOADED       │
</span></span><span style=display:flex><span>     │            │
</span></span><span style=display:flex><span>     ▼            │
</span></span><span style=display:flex><span>  INSTALL ────────┤
</span></span><span style=display:flex><span>     │            │
</span></span><span style=display:flex><span>     ├─◀─┐        │
</span></span><span style=display:flex><span>     ▼   │        │
</span></span><span style=display:flex><span> INSTALLING ──────┤
</span></span><span style=display:flex><span>     │            │
</span></span><span style=display:flex><span>     ▼            │
</span></span><span style=display:flex><span> INSTALLED        │
</span></span><span style=display:flex><span>     │            │
</span></span><span style=display:flex><span>     ▼            │
</span></span><span style=display:flex><span>  ACTIVATE ───────┤
</span></span><span style=display:flex><span>     │            │
</span></span><span style=display:flex><span>     ├─◀─┐        │
</span></span><span style=display:flex><span>     ▼   │        │
</span></span><span style=display:flex><span> ACTIVATING ──────┤
</span></span><span style=display:flex><span>     │            │
</span></span><span style=display:flex><span>     ▼            ▼
</span></span><span style=display:flex><span> ACTIVATED    TERMINATED
</span></span></code></pre></div><h2 id=job-definition>Job Definition</h2><p>As being general purpose, wfx doesn&rsquo;t impose a particular schema on the information conveyed to the device describing
its action(s) to perform, except that it&rsquo;s in JSON format. Instead, the job definition is a contract between the
operator creating jobs, each possibly following a different workflow, and the client(s) executing those jobs in
lock-step with the wfx. The same is true for the type of update artifacts that are specified in the job definition and
that can be of any form such as, e.g., firmware disk images, container images, or configurations: The operator has to
has to take care to only assign jobs to devices that are known to be able to digest this type of update artifact. wfx
doesn&rsquo;t exercise any checks on compatibility.</p><p>An exemplary job for a device called <code>example</code> (utilizing the
<a href=../../../docs/configuration/#file-server>built-in simple file
server</a>) may be created as follows:</p><pre><code>cat &lt;&lt;EOF | wfxctl job create --client-id example --workflow wfx.workflow.dau.direct -
{
  &quot;version&quot;: &quot;1.0&quot;,
  &quot;type&quot;: [&quot;firmware&quot;],
  &quot;artifacts&quot;: [
    {
      &quot;name&quot;: &quot;Example Device Firmware Artifact&quot;,
      &quot;version&quot;: &quot;1.1&quot;,
      &quot;uri&quot;: &quot;http://wfx.host:8080/download/example_artifact.swu&quot;
    }
  ]
}
EOF
</code></pre><p>The <code>type</code> list field allows to label update jobs. Labels may be used by wfx&rsquo;s on-device counterpart to determine the
activation action(s) to execute since, e.g., container images need a different activation action than firmware disk
images or a configuration change.</p><p>In the preceding example, the presence of the <code>firmware</code> label may be used to instruct the on-device client to
test-reboot into the new firmware.</p><p>Since wfx isn&rsquo;t concerned with the job definition except for conveying it to the device, it can be adapted to specific
needs by feeding in a different job definition into the wfx on job creation and having a client on the device that can
digest it.</p></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/siemens/wfx aria-label=GitHub><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Siemens Open Source" aria-label="Siemens Open Source"><a target=_blank rel=noopener href=https://opensource.siemens.com/ aria-label="Siemens Open Source"><i class="fa fa-heart"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"></div></div></div></footer></div><script src=../../../js/main.min.8bdc707530d61dee3a6fd659f8a422c05d2e2319377a8710175451ca21fa83b0.js integrity="sha256-i9xwdTDWHe46b9ZZ+KQiwF0uIxk3eocQF1RRyiH6g7A=" crossorigin=anonymous></script><script defer src=../../../js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=../../../js/tabpane-persist.js></script></body></html>