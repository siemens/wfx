<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=alternate type=application/rss+xml href=../../docs/workflows/index.xml><meta name=robots content="index, follow"><link rel="shortcut icon" href=../../favicons/favicon.ico><link rel=apple-touch-icon href=../../favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=../../favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=../../favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=../../favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=../../favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=../../favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=../../favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=../../favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=../../favicons/android-192x192.png sizes=192x192><title>Workflows |</title><meta name=description content="A workflow is a finite-state machine that is defined in YAML format and follows specific rules and constraints. More precisely, a workflow consists of
a non-empty unique name, a non-empty finite set of named states, a non-empty finite set of transitions correlating states by their names, and optionally, a set of groups collating states by their names, see the wfx OpenAPI Specification’s Workflow object for reference.
wfx supports dynamic loading and unloading of workflows at run-time; when a workflow is loaded into wfx, it is validated to ensure that it adheres to these rules and constraints. Upon loading a workflow into wfx it is persistently stored (see Configuration) and is henceforth immutable. However, as long as there is no job referencing it ― including finished ones ― workflows can be unloaded, i.e., deleted from wfx’s persistent storage. After having corrected the unloaded workflow, it can be loaded into wfx again."><meta property="og:url" content="/docs/workflows/"><meta property="og:title" content="Workflows"><meta property="og:description" content="A workflow is a finite-state machine that is defined in YAML format and follows specific rules and constraints. More precisely, a workflow consists of
a non-empty unique name, a non-empty finite set of named states, a non-empty finite set of transitions correlating states by their names, and optionally, a set of groups collating states by their names, see the wfx OpenAPI Specification’s Workflow object for reference.
wfx supports dynamic loading and unloading of workflows at run-time; when a workflow is loaded into wfx, it is validated to ensure that it adheres to these rules and constraints. Upon loading a workflow into wfx it is persistently stored (see Configuration) and is henceforth immutable. However, as long as there is no job referencing it ― including finished ones ― workflows can be unloaded, i.e., deleted from wfx’s persistent storage. After having corrected the unloaded workflow, it can be loaded into wfx again."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Workflows"><meta itemprop=description content="A workflow is a finite-state machine that is defined in YAML format and follows specific rules and constraints. More precisely, a workflow consists of
a non-empty unique name, a non-empty finite set of named states, a non-empty finite set of transitions correlating states by their names, and optionally, a set of groups collating states by their names, see the wfx OpenAPI Specification’s Workflow object for reference.
wfx supports dynamic loading and unloading of workflows at run-time; when a workflow is loaded into wfx, it is validated to ensure that it adheres to these rules and constraints. Upon loading a workflow into wfx it is persistently stored (see Configuration) and is henceforth immutable. However, as long as there is no job referencing it ― including finished ones ― workflows can be unloaded, i.e., deleted from wfx’s persistent storage. After having corrected the unloaded workflow, it can be loaded into wfx again."><meta itemprop=wordCount content="1805"><meta name=twitter:card content="summary"><meta name=twitter:title content="Workflows"><meta name=twitter:description content="A workflow is a finite-state machine that is defined in YAML format and follows specific rules and constraints. More precisely, a workflow consists of
a non-empty unique name, a non-empty finite set of named states, a non-empty finite set of transitions correlating states by their names, and optionally, a set of groups collating states by their names, see the wfx OpenAPI Specification’s Workflow object for reference.
wfx supports dynamic loading and unloading of workflows at run-time; when a workflow is loaded into wfx, it is validated to ensure that it adheres to these rules and constraints. Upon loading a workflow into wfx it is persistently stored (see Configuration) and is henceforth immutable. However, as long as there is no job referencing it ― including finished ones ― workflows can be unloaded, i.e., deleted from wfx’s persistent storage. After having corrected the unloaded workflow, it can be loaded into wfx again."><link rel=preload href=../../scss/main.min.c8dcdb3f03c743ca49f5d91bafebe0006c9d1d4f2d0d237c4b6409583838fba2.css as=style integrity="sha256-yNzbPwPHQ8pJ9dkbr+vgAGydHU8tDSN8S2QJWDg4+6I=" crossorigin=anonymous><link href=../../scss/main.min.c8dcdb3f03c743ca49f5d91bafebe0006c9d1d4f2d0d237c4b6409583838fba2.css rel=stylesheet integrity="sha256-yNzbPwPHQ8pJ9dkbr+vgAGydHU8tDSN8S2QJWDg4+6I=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-section><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="td-navbar-container container-fluid flex-column flex-md-row"><a class=navbar-brand href=../../><span class="navbar-brand__logo navbar-logo"><svg id="Ebene_1" width="477.65" height="263.3" viewBox="0 0 955.3 526.6"><style id="style56">.st0{fill:#00c1b6}.st1{fill:#1b9a99}</style><g id="Ebene_1_00000104692970429684080800000006472111204584987530_" transform="translate(-490.1 -233.3)"><path id="path58" d="m1163.3 569.5-97.2-52.2c-7.5-4-16.7 1.4-16.7 10v104.3c0 8.6 9.1 14 16.7 10l97.2-52.2c8-4.2 8-15.6.0-19.9zM777.8 673.3v86.6H625.6c-74.8.0-135.5-60.7-135.5-135.5v-146c10.5 12 26 19.6 43.2 19.6 17.3.0 32.9-7.7 43.4-19.9v146.3c0 27 21.9 48.9 48.9 48.9z" class="st0"/><path id="path60" d="M776.8 759.9c-74.8.0-135.5-60.7-135.5-135.5V441.1c0-23.9 19.4-43.3 43.3-43.3s43.3 19.4 43.3 43.3v183.4c0 27 21.9 48.9 48.9 48.9h15.7v-189c0-47.8 38.8-86.6 86.6-86.6v259.8c0 56.5-45.8 102.3-102.3 102.3z" class="st1"/><path id="path62" d="M1146.3 759.4h-19.1c-23.9.0-43.3-19.4-43.3-43.3s19.4-43.3 43.3-43.3h14.4c27 0 48.9-21.9 48.9-48.9v-87.3c0-28.8-23.4-52.2-52.2-52.2h-261v-86.6h261c76.7.0 138.8 62.1 138.8 138.8v92c0 72.3-58.6 130.8-130.8 130.8z" class="st1"/><path id="path64" d="M1445.4 441.1c0 12-4.8 22.8-12.7 30.6-7.8 7.8-18.7 12.7-30.6 12.7h-72.8c-27 0-48.9 21.9-48.9 48.9v92c0 26.3 21.3 47.5 47.5 47.5h37c-12.3 10.5-20 26.1-20 43.5.0 17.1 7.6 32.5 19.5 43.1h-31.8c-76.7.0-138.8-62.1-138.8-138.8v-87.3c0-74.8 60.7-135.5 135.5-135.5h72.8c23.9.0 43.3 19.4 43.3 43.3zm-347.1-121.2h-23c-27 0-48.9 21.9-48.9 48.9V716c0 23.9-19.4 43.3-43.3 43.3s-43.3-19.4-43.3-43.3V368.8c0-74.8 60.7-135.5 135.5-135.5h23.2c-12.2 10.5-19.9 26.1-19.9 43.4.0 17.2 7.6 32.7 19.7 43.2z" class="st1"/><circle id="circle66" cx="1136" cy="276.7" r="43.1" class="st1"/><circle id="circle68" cx="1402.3" cy="716.3" r="43.1" class="st1"/><circle id="circle70" cx="533.3" cy="440.7" r="43.1" class="st0" transform="rotate(-80.781 533.308 440.692)"/></g></svg></span><span class=navbar-brand__name></span></a><div class="td-navbar-nav-scroll td-navbar-nav-scroll--indicator" id=main_navbar><div class="scroll-indicator scroll-left"></div><ul class=navbar-nav><li class=nav-item><a class="nav-link active" href=../../docs/><span>Documentation</span></a></li></ul><div class="scroll-indicator scroll-right"></div></div><div class="d-none d-lg-block td-navbar__search"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=../../offline-search-index.baa9b11a69b090ef1e50906e1e8e543c.json data-offline-search-base-href=../../ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main data-bs-spy=scroll data-bs-target=.td-toc data-bs-root-margin="0px 0px -10%"><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=../../offline-search-index.baa9b11a69b090ef1e50906e1e8e543c.json data-offline-search-base-href=../../ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=../../docs/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsinstallation-li><a href=../../docs/installation/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsinstallation><span>Build and Installation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconfiguration-li><a href=../../docs/configuration/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconfiguration><span>Configuration</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperations-li><a href=../../docs/operations/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperations><span>Operations</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsapi-li><a href=../../docs/api/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi><span>REST API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuse-cases-li><a href=../../docs/use-cases/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuse-cases><span>Use Cases</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsworkflows-li><a href=../../docs/workflows/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__section" id=m-docsworkflows><span class=td-sidebar-nav-active-item>Workflows</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsworkflowsdau-li><a href=../../docs/workflows/dau/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsworkflowsdau><span>Device Artifact Update (DAU)</span></a></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"></div><div class=td-toc data-proofer-ignore><div class=td-toc-title><span class=td-toc-title__text>On this page</span>
<a class=td-toc-title__link title="Top of page" href=#></a></div><nav id=TableOfContents><ul><li><a href=#jobs>Jobs</a><ul><li><a href=#creating-jobs>Creating Jobs</a></li><li><a href=#updating-jobs>Updating Jobs</a></li><li><a href=#job-history>Job History</a></li><li><a href=#deleting-jobs>Deleting Jobs</a></li></ul></li><li><a href=#kanban-example-workflow>Kanban Example Workflow</a><ul><li><a href=#hands-on-playing-kanban>Hands-on: Playing Kanban</a></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=../../docs/>Documentation</a></li><li class="breadcrumb-item active" aria-current=page>Workflows</li></ol></nav><div class=td-content><h1>Workflows</h1><header class=article-meta></header><p>A <em>workflow</em> is a finite-state machine that is defined in
<a href=https://github.com/go-yaml/yaml#compatibility target=_blank>YAML</a> format
and follows specific rules and constraints. More precisely, a <em>workflow</em> consists of</p><ul><li>a non-empty unique <code>name</code>,</li><li>a non-empty finite set of named <code>states</code>,</li><li>a non-empty finite set of <code>transitions</code> correlating states by their names, and</li><li>optionally, a set of <code>groups</code> collating states by their names,</li></ul><p>see the
<a href=../../wfx.openapi.yml>wfx OpenAPI Specification</a>&rsquo;s <code>Workflow</code> object for reference.</p><p>wfx supports dynamic loading and unloading of workflows at run-time; when a workflow is loaded into wfx, it is validated
to ensure that it adheres to these rules and constraints. Upon loading a workflow into wfx it is persistently stored
(see
<a href=../../docs/configuration/>Configuration</a>) and is henceforth <strong>immutable</strong>. However, as long as there is no job
referencing it ― including finished ones ― workflows can be unloaded, i.e., deleted from wfx&rsquo;s persistent storage. After
having corrected the unloaded workflow, it can be loaded into wfx again.</p><p>Graph-wise, the set of states defines the nodes of the finite-state machine graph and the set of transitions defines the
directed edges among the nodes. In the optional set of groups, disjoint sets of states can be combined for semantic
grouping and easier state query selection.</p><p>Each <em>state</em> in <code>states</code> consists of</p><ul><li>a unique <code>name</code>, and</li><li>a <code>description</code>.</li></ul><p>Each <em>group</em> in <code>groups</code> consists of</p><ul><li>a unique <code>name</code> and</li><li>a non-empty set of <code>states</code>&rsquo; names.</li></ul><p>Each <em>transition</em> in <code>transitions</code> consists of</p><ul><li>a starting state name <code>from</code> matching one of the unique state names in <code>states</code>,</li><li>an ending state name <code>to</code> matching one of the unique state names in <code>states</code>,</li><li>an <code>eligible</code> attribute denoting the entity that may execute the transition, either <code>CLIENT</code> or <code>WFX</code>, and</li><li>an optional <code>action</code> attribute that ― depending on the <code>eligible</code> entity ― specifies the transition execution action.</li></ul><p><strong>Note</strong>: Trivial transitions, where the source and destination states are the same (<code>from == to</code>), are implicit in the
workflow. These transitions allow the client to report progress within the same state without requiring the transition
to be explicitly defined in the workflow (thereby clobbering the workflow).</p><p>The currently valid actions for <code>WFX</code>-eligible transitions are</p><ul><li><code>IMMEDIATE</code>: wfx instantly transitions to the transition&rsquo;s ending state <code>to</code>, and</li><li><code>WAIT</code>: external north-bound input, e.g., by an operator or a higher-up hierarchical wfx is required to advance the
workflow</li></ul><p>with <code>WAIT</code> being the default <code>WFX</code> action.</p><p>For <code>CLIENT</code>-eligible transitions, there are currently no pre-defined actions to assign to in a workflow specification.
Instead, the transition execution actions are encoded in the client implementations which are specific to a workflow
(family).</p><p>Extending the available actions for <code>WFX</code>-eligible transitions and providing actions for <code>CLIENT</code>-eligible transitions
is recorded in the
<a href=https://github.com/siemens/wfx/issues target=_blank>Roadmap</a>.</p><p>Beyond syntactic requirements such as, e.g., a particular set being non-empty or the uniqueness property of names, the
following semantic rules and constraints are checked and enforced by wfx upon loading a workflow:</p><ul><li>There&rsquo;s exactly one initial state, i.e., there are no incoming transitions to this state with this state&rsquo;s name in
<code>to</code>.</li><li>There are no unreachable states, i.e., states without an incoming transition.</li><li>For each state, there can&rsquo;t be more than one outgoing transition whose <code>action</code> is <code>IMMEDIATE</code>.</li><li>Transition tuples (<code>from</code>, <code>to</code>, <code>eligible</code>, <code>action</code>) must be unique.</li><li>There are no cycles in the workflow graph <em>except</em> for trivial cycles, i.e. transitions where <code>from</code> equals <code>to</code> (used
for e.g. progress reporting).</li><li>Each state belongs to <em>at most one</em> group.</li></ul><p><strong>Tip</strong>: <code>wfxctl</code> can be used to validate workflows offline, e.g.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wfxctl workflow validate workflow/dau/wfx.workflow.dau.direct.yml
</span></span></code></pre></div><p>These definitions are illustrated in more detail in the following exemplary Kanban workflow.</p><h2 id=jobs>Jobs</h2><p>A <em>job</em> is an instance of a workflow in which wfx and a client progress in lock-step. As a result, a job can only be
created if the corresponding workflow already exists. Jobs can be driven by different workflows. This allows wfx to
accommodate a variety of use cases and workflows that are tailored to specific needs. For example, firmware and
container image updates may have different requirements and constraints that require separate workflows to address them.</p><h3 id=creating-jobs>Creating Jobs</h3><p>A new job can be created by sending a <code>JobRequest</code> object (see
<a href=../../wfx.openapi.yml>wfx OpenAPI Specification</a>) to wfx&rsquo;s
<a href=../../docs/operations/>northbound REST API</a>. A JobRequest consists of the following:</p><ul><li>a non-empty <code>clientId</code> to assign the job to a specific client</li><li>a non-empty <code>workflow</code> name to select a workflow for the job</li><li>an optional array of <code>tags</code> that can be used to query the job</li><li>an optional job <code>definition</code>, which is a freeform JSON object that provides job-specific data to the client.</li></ul><p>For example, the job <code>definition</code> could contain a download URL for an encrypted firmware artifact that only the specific
client can decrypt.</p><p>When wfx accepts the <code>JobRequest</code>, a new <code>Job</code> entity is created, and the following fields are populated by wfx:</p><ul><li><code>id</code>: the globally unique job id</li><li><code>state</code>: the unique initial state of the workflow that drives the job</li><li><code>stime</code>, <code>mtime</code>: the date and time (ISO8601) when the job was created</li><li><code>status.definitionHash</code>: a hash value computed over the <code>definition</code> field, used to detect job <code>definition</code>
modifications.</li></ul><h3 id=updating-jobs>Updating Jobs</h3><p>After a job has been created, its <code>definition</code>, <code>status</code>, and <code>tags</code> can be updated using wfx&rsquo;s REST APIs. If a job
<code>definition</code> is updated <em>after</em> a client has already started working on the job, this assumes that the client can handle
the changes. To simplify things for client authors, wfx automatically updates the <code>status.definitionHash</code> whenever the
<code>definition</code> changes. This provides a mechanism for detecting changes in the <code>definition</code>.</p><h3 id=job-history>Job History</h3><p>Whenever a job&rsquo;s <code>status</code> or <code>definition</code> changes, wfx prepends the current value to the job&rsquo;s <code>history</code> array. This
allows for reviewing job updates later on and diagnosing problems.</p><p><strong>Note</strong>: By default, the job history is omitted from all <code>Job</code> responses, primarily due to its diagnostic nature but
also for bandwidth reasons. Clients requiring a job&rsquo;s historical data must explicitly request the specific job and
include the <code>history=true</code> parameter in their request.</p><h3 id=deleting-jobs>Deleting Jobs</h3><p>Jobs can be deleted using the northbound REST API. For example, this can be used to perform maintenance on old jobs.
Note that wfx does not perform any housekeeping on its own.</p><h2 id=kanban-example-workflow>Kanban Example Workflow</h2><p>An exemplary
<a href=https://en.wikipedia.org/wiki/Kanban target=_blank>Kanban</a>-inspired workflow YAML specification may be defined as
follows:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#0550ae>name</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>wfx.workflow.kanban<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff></span><span style=color:#0550ae>groups</span><span style=color:#1f2328>:</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>  </span>- <span style=color:#0550ae>name</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>OPEN<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>description</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>The task is ready for the client(s).<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>states</span><span style=color:#1f2328>:</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>      </span>- NEW<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>      </span>- PROGRESS<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>      </span>- VALIDATE<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>  </span>- <span style=color:#0550ae>name</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>CLOSED<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>description</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>The task is in a final state, i.e. it cannot progress any further.<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>states</span><span style=color:#1f2328>:</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>      </span>- DONE<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>      </span>- DISCARDED<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff></span><span style=color:#0550ae>states</span><span style=color:#1f2328>:</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>  </span>- <span style=color:#0550ae>name</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>BACKLOG<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>description</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>Task is created<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>  </span>- <span style=color:#0550ae>name</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>NEW<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>description</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>task is ready to be pulled<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>  </span>- <span style=color:#0550ae>name</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>PROGRESS<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>description</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>task is being worked on<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>  </span>- <span style=color:#0550ae>name</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>VALIDATE<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>description</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>task is validated<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>  </span>- <span style=color:#0550ae>name</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>DONE<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>description</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>task is done according to the definition of done<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>  </span>- <span style=color:#0550ae>name</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>DISCARDED<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>description</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>task is discarded<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff></span><span style=color:#0550ae>transitions</span><span style=color:#1f2328>:</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>  </span>- <span style=color:#0550ae>from</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>BACKLOG<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>to</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>NEW<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>eligible</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>WFX<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>action</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>IMMEDIATE<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>description</span><span style=color:#1f2328>:</span><span style=color:#fff> </span><span style=color:#1f2328>|</span><span style=color:#0a3069>
</span></span></span><span style=display:flex><span><span style=color:#0a3069>      Immediately transition to &#34;NEW&#34; upon a task hitting the backlog,
</span></span></span><span style=display:flex><span><span style=color:#0a3069>      conveniently done by wfx &#34;on behalf of&#34; the Product Owner.</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>  </span>- <span style=color:#0550ae>from</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>NEW<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>to</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>PROGRESS<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>eligible</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>CLIENT<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>description</span><span style=color:#1f2328>:</span><span style=color:#fff> </span><span style=color:#1f2328>|</span><span style=color:#0a3069>
</span></span></span><span style=display:flex><span><span style=color:#0a3069>      A Developer pulls the task or
</span></span></span><span style=display:flex><span><span style=color:#0a3069>      the Product Owner discards it (see below transition),
</span></span></span><span style=display:flex><span><span style=color:#0a3069>      whoever comes first.</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>  </span>- <span style=color:#0550ae>from</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>NEW<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>to</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>DISCARDED<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>eligible</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>WFX<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>description</span><span style=color:#1f2328>:</span><span style=color:#fff> </span><span style=color:#1f2328>|</span><span style=color:#0a3069>
</span></span></span><span style=display:flex><span><span style=color:#0a3069>      The Product Owner discards the task or
</span></span></span><span style=display:flex><span><span style=color:#0a3069>      a Developer pulls it (see preceding transition),
</span></span></span><span style=display:flex><span><span style=color:#0a3069>      whoever comes first.</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>  </span>- <span style=color:#0550ae>from</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>PROGRESS<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>to</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>VALIDATE<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>eligible</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>CLIENT<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>description</span><span style=color:#1f2328>:</span><span style=color:#fff> </span><span style=color:#1f2328>|</span><span style=color:#0a3069>
</span></span></span><span style=display:flex><span><span style=color:#0a3069>      The Developer has completed the task, it&#39;s ready for validation.</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>  </span>- <span style=color:#0550ae>from</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>PROGRESS<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>to</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>PROGRESS<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>eligible</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>CLIENT<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>description</span><span style=color:#1f2328>:</span><span style=color:#fff> </span><span style=color:#1f2328>|</span><span style=color:#0a3069>
</span></span></span><span style=display:flex><span><span style=color:#0a3069>      The Developer reports task completion progress percentage.</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>  </span>- <span style=color:#0550ae>from</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>VALIDATE<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>to</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>DISCARDED<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>eligible</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>WFX<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>description</span><span style=color:#1f2328>:</span><span style=color:#fff> </span><span style=color:#1f2328>|</span><span style=color:#0a3069>
</span></span></span><span style=display:flex><span><span style=color:#0a3069>      The task result has no customer value.</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>  </span>- <span style=color:#0550ae>from</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>VALIDATE<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>to</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>DISCARDED<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>eligible</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>CLIENT<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>description</span><span style=color:#1f2328>:</span><span style=color:#fff> </span><span style=color:#1f2328>|</span><span style=color:#0a3069>
</span></span></span><span style=display:flex><span><span style=color:#0a3069>      The task result cannot be integrated into Production software.</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>  </span>- <span style=color:#0550ae>from</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>VALIDATE<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>to</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>DONE<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>eligible</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>CLIENT<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>description</span><span style=color:#1f2328>:</span><span style=color:#fff> </span><span style=color:#1f2328>|</span><span style=color:#0a3069>
</span></span></span><span style=display:flex><span><span style=color:#0a3069>      A Developer has validated the task result as useful.</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>  </span>- <span style=color:#0550ae>from</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>VALIDATE<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>to</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>DONE<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>eligible</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>WFX<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>action</span><span style=color:#1f2328>:</span><span style=color:#fff> </span>WAIT<span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#0550ae>description</span><span style=color:#1f2328>:</span><span style=color:#fff> </span><span style=color:#1f2328>|</span><span style=color:#0a3069>
</span></span></span><span style=display:flex><span><span style=color:#0a3069>      The Product Owner has validated the task result as useful</span><span style=color:#fff>
</span></span></span></code></pre></div><p>resulting in the following graph representation:</p><pre><code> BACKLOG
    │
    ▼
   NEW ───────┐
    │         │
    ├◀─┐      │
    ▼  │      │
PROGRESS ─────┤
    │         │
    ▼         │
VALIDATE ─────┤
    │         │
    ▼         ▼
  DONE    DISCARDED
</code></pre><h3 id=hands-on-playing-kanban>Hands-on: Playing Kanban</h3><p>Assuming the preceding Kanban workflow is saved in the file <code>wfx.workflow.kanban.yml</code>,</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>wfxctl workflow create --filter<span style=color:#0550ae>=</span>.transitions wfx.workflow.kanban.yml
</span></span></code></pre></div><p>loads the Kanban workflow into wfx making it available to create jobs driven by it. Note that the the command&rsquo;s output
was made less verbose by using a <code>--filter</code> to only show the transitions.</p><p>Henceforth, a job is identified with a &ldquo;Task&rdquo; and a state is identified with a &ldquo;Lane&rdquo; in Kanban board parlance. The
Product Owner Parker as also owning and managing the Kanban &ldquo;Board&rdquo; instruments the northbound wfx management interface
while Developers instrument the southbound client interface.</p><p>Now that the Kanban workflow is available, Product Owner Parker creates a new Backlog item ― overriding the Pull
principle ― to be taken by the highly specialized Developer Dana:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#39;{ &#34;title&#34;: &#34;expose job api&#34; }&#39;</span> <span style=color:#1f2328>|</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    wfxctl job create --workflow wfx.workflow.kanban <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>                      --client-id dana <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>                      --filter<span style=color:#0550ae>=</span><span style=color:#0a3069>&#39;del(.workflow)&#39;</span> -
</span></span></code></pre></div><p>The Task is immediately transitioned to the &ldquo;NEW&rdquo; state (Kanban Lane) by wfx on behalf of the Product Owner Parker as
the transition&rsquo;s <code>action</code> is <code>IMMEDIATE</code>. Note that the piped-in JSON document is the <em>Job Definition</em> (see
<a href=../../wfx.openapi.yml>wfx OpenAPI
Specification</a>) which is the contract between the operator (Product Owner) creating jobs (Tasks) and
the clients (Developers) executing those jobs so that they&rsquo;re actually able to process the job.</p><p>Then, Developer Dana, knowing the job (Task) Identifier, pulls the task into &ldquo;PROGRESS&rdquo;</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>wfxctl job update-status <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    --actor<span style=color:#0550ae>=</span>client <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    --id<span style=color:#0550ae>=</span><span style=color:#0550ae>1</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    --state<span style=color:#0550ae>=</span>PROGRESS
</span></span></code></pre></div><p>and starts working on it.</p><p>Traditional tools like <code>curl</code> can also be used instead of <code>wfxctl</code> to achieve the same result:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>curl -X PUT <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  http://localhost:8080/api/wfx/v1/jobs/1/status <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -H <span style=color:#0a3069>&#39;Content-Type: application/json&#39;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -H <span style=color:#0a3069>&#39;Accept: application/json&#39;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -d <span style=color:#0a3069>&#39;{&#34;state&#34;:&#34;PROGRESS&#34;}&#39;</span>
</span></span></code></pre></div><p>Meanwhile, Developer Dana sporadically reports progress</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>wfxctl job update-status <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    --actor<span style=color:#0550ae>=</span>client <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    --id<span style=color:#0550ae>=</span><span style=color:#0550ae>1</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    --state<span style=color:#0550ae>=</span>PROGRESS <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    --progress <span style=color:#cf222e>$((</span>RANDOM <span style=color:#0550ae>%</span> <span style=color:#0550ae>100</span><span style=color:#cf222e>))</span>
</span></span></code></pre></div><p>until having finished the task and progressing it into the &ldquo;VALIDATE&rdquo; state:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>wfxctl job update-status <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    --actor<span style=color:#0550ae>=</span>client <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    --id<span style=color:#0550ae>=</span><span style=color:#0550ae>1</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    --state<span style=color:#0550ae>=</span>VALIDATE
</span></span></code></pre></div><p>Then, Developer Dana may realize that the task result cannot be integrated into the Production software and may put it
into &ldquo;DISCARDED&rdquo; or Product Owner Parker may come to the conclusion that no customer value is provided by the task
result, also putting it into &ldquo;DISCARDED&rdquo; ― whoever realizes this first.</p><p>Or, if the task result greatly increases customer value, Developer Dana as being highly experienced may do the
validation herself, thereafter putting the task to &ldquo;DONE&rdquo;. The Product Owner Parker may come to the same conclusion ―
again whoever is faster in realizing the customer benefit.</p><p>Alternatively, if the task in question holds significant potential for increased customer value, Developer Dana, being
highly experienced, may undertake the validation process herself and subsequently mark the task as &ldquo;DONE.&rdquo; Likewise,
Product Owner Parker may arrive at the same conclusion and act accordingly - again, whoever realizes this first may
advance the task accordingly.</p><div class=section-index><hr class=panel-line><div class=entry><h5><a href=../../docs/workflows/dau/>Device Artifact Update (DAU)</a></h5><p></p></div></div></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/siemens/wfx aria-label=GitHub><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Siemens Open Source" aria-label="Siemens Open Source"><a target=_blank rel=noopener href=https://opensource.siemens.com/ aria-label="Siemens Open Source"><i class="fa fa-heart"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"></div></div></div></footer></div><script src=../../js/main.min.8dd4d36f10f64ef5224e04ba313f8e91e183feca404406187e7d4bad9bc83b21.js integrity="sha256-jdTTbxD2TvUiTgS6MT+OkeGD/spARAYYfn1LrZvIOyE=" crossorigin=anonymous></script><script defer src=../../js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=../../js/tabpane-persist.js></script></body></html>